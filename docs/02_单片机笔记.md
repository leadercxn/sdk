# 单片机笔记
## 1. ADC
1. ADC读通道转换结果
   1. 规则模式
      1. 单通道--可以使用轮询、中断、DMA，轮询/中断直接从`ADC_GetConversionValue`获取转换结果
      2. 多通道
         1. 非间断模式--DMA，因为每次转换结束，`ADC_FLAG_EOC`会在全部通道转换结束后才会置位，而ADC_DR仅存储最后一个通道的转换结果，因此不适用中断/轮询方式获取多通道非间断方式
         2. 间断模式--中断、轮询，
   2. 注入模式
      1. 单通道--轮询、中断、DMA，从`ADC_GetInjectedConversionValue`获取对应通道的转换结果，
      2. 多通道--轮询、中断、DMA
         1. 在注入模式中，可以通过对`ADC_GetInjectedConversionValue`执行多次读操作，即可以实现多通道转换值的读取
         2. 规则模式中，把ADCx->DR直接映射到内存变量中，DMA需要设置外设地址不变，但是在注入模式中，外设地址需要根据实际的通道情况实际配置(注入模式的转换结果存储在`(uint32_t)ADCx+ADC_InjectedChannel + JDR_Offset`)
2. 若芯片没有Vref管脚，则参考电压为MCU供电电压,否则参考电压等于Vref
3. 在使用外部信号触发ADC采样时，只能使用高电平触发，因此定时器触发只有PWM模式才可以触发
4. 使用外部信号触发ADC采样时，获取采样结果建议使用DMA/中断方式，如果使用轮询方式获取，每次轮询的时间可能会和转换成功的时间对不上，导致程序卡死的情况(轮询需要一直等待转换成功标志位)


ADC模块工作
1. 其他触发方式--定时器(OK)
2. 常规模式--轮询、中断、DMA
   1. 非间断模式，单通道/多通道
   2. 间断模式，单通道/多通道
3. 常规模式--轮询、中断、DMA
   1. 非间断模式，单通道/多通道
   2. 间断模式，单通道/多通道


